{% extends 'common/base.html' %}
{% load static %}

{% block style_code %}
<style>
  * {
      font-family: 'Noto Sans KR', sans-serif;
    }
  html,
  body {
    height: 100%;
    margin: 0;
    padding: 0;
  }

  hr[role="tournament2"] {
    border: 0px solid;
    height: 1px;
    background-image: linear-gradient(
      to right,
      rgba(0, 0, 0, 0),
      rgba(0, 140, 186, 0.75),
      rgba(0, 0, 0, 0)
    );
    margin: 32px 0px;
    display: block;
  }
  .snip1535 {
    background-color: #eeeeee;
    border: none;
    color: #ffffff;
    cursor: pointer;
    display: inline-block;
    font-family: "BenchNine", Arial, sans-serif;
    font-size: 1em;
    font-size: 10px;
    line-height: 1em;
    margin: 5px 20px;
    outline: none;
    padding: 5px 20px 4px;
    position: relative;
    text-transform: uppercase;
    font-weight: 700;
  }
  .snip1535:before,
  .snip1535:after {
    border-color: transparent;
    -webkit-transition: all 0.25s;
    transition: all 0.25s;
    border-style: solid;
    border-width: 0;
    content: "";
    height: 24px;
    position: absolute;
    width: 24px;
  }
  .snip1535:before {
    border-color: #13bbad;
    border-right-width: 2px;
    border-top-width: 2px;
    right: -5px;
    top: -5px;
  }
  .snip1535:after {
    border-bottom-width: 2px;
    border-color: #13bbad;
    border-left-width: 2px;
    bottom: -5px;
    left: -5px;
  }
  .snip1535:hover,
  .snip1535.hover {
    background-color: #13bbad;
  }
  .snip1535:hover:before,
  .snip1535.hover:before,
  .snip1535:hover:after,
  .snip1535.hover:after {
    height: 100%;
    width: 100%;
  }
  .scroll_head,.scroll_body { display: block; }

  .scroll_body {
    height:550px;

    overflow-y: auto;
  }
</style>
{% endblock %}

{% block script_code %}
<script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
<script src="https://ajax.googleapis.com/ajax/libs/handlebars/4.7.7/handlebars.min.js"></script>
<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" />


<!--  <script defer src="./index.js"></script>-->
     <script>
    window.initMap = function() {
      const map = new google.maps.Map(document.getElementById("map"), {
        center: {
          lat: 37.5400456,
          lng: 126.9921017
        },
        zoom: 10,
      });
      {% block maps %}
      var malls = [
        {% for i in tourist %}
          {label: "{{i.t_name}}",
          name: "{{i.t_name}}",
          lat: {{i.lat}},
          lng: {{i.lon}}},
        {% endfor %}   ];
      {% endblock %}
      const bounds = new google.maps.LatLngBounds();
      const infowindow = new google.maps.InfoWindow();
      malls.forEach(({
        label,
        name,
        lat,
        lng
      }) => {
        const marker = new google.maps.Marker({
          position: {
            lat,
            lng
          },
          label,
          map: map,
          icon:{
              url:'/static/img/marker.png',
              labelOrigin: new google.maps.Point(7, -10),
          }
        });
        bounds.extend(marker.position);
        marker.addListener("click", () => {
          infowindow.setContent(name);
          infowindow.open({
            anchor: marker,
            map,
          });
        });
      });
      map.fitBounds(bounds);
    };
  </script>
<script defer="" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAzu2iFOodz7NEWlhrBvz8lv-0DZ81cEpI&amp;&callback=initMap"></script>
{% endblock %}

{% block content%}
<div class="container" style="margin-top: 70px">
  <div class="row">
    <div class="col-md-8" style="">
      <div
        id="map"
        style="height: 600px; width: 750px; margin-left: 0px; margin-top: 0px;"></div>
    </div>
    <div class="col-md-4" style="">
      <div class="table-responsive" style="width:450px">
          <table class="table" >
          <thead class="scroll_head">
            <tr align="center">
              <th></th>
              <th>관광지 및 맛집</th>
              <th>&nbsp;&nbsp;&nbsp;카테고리</th>
            </tr>
          </thead>
          <tbody class="scroll_body">
          {% for i in tourist %}
          <tr align="center">
              <td>{{ i.t_name }}</td>
              <td>{{ i.cate }}</td>
              <td>
                <button class="snip1535">Add Location</button>
              </td>
            </tr>
          {% endfor %}


          </tbody>
        </table>
      </div>
    </div>
  </div>
  <h3 class="" style="margin-top: 15px">
    <span class="place_subway" style="font-family: 'Jua', sans-serif;">{{ station_pop.station }}역</span>의 예상 유동인구는 <span class="plae_pop" style="font-family: 'Jua', sans-serif;">{{ station_pop.pop }}명</span> 입니다.
  </h3>
</div>

<hr role="tournament2"/>
  <div class="py-5">
    <div class="container">
      <div class="row">
        <div class="col-md-8">
          <h3 class="" style="margin-top:15px; ">{{ year }}년 <span class="now_date" style="font-family: 'Jua', sans-serif;">{{ month }}월 {{ day }}일 {{ time }}시</span> 서울시 <span class="gu" style="font-family: 'Jua', sans-serif; ">{{gu}}</span>의 날씨 및 미세먼지 </h3>
        </div>
        <div class="col-md-4">
          <div class="row">
            <div class="col-md-12">
              <div class="row">
                <div class="col-md-6"><img class="img-fluid d-block float-right" src="{% static 'img/tourist.png' %}" width="60">
                </div>
                <div class="col-md-6"><img class="img-fluid d-block" src="{% static 'img/tourists.png' %}" width="60">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row">

        <div class="col-md-6">
          <div class="table-responsive">
                <table class="table table-striped table-borderless" style="text-align:center;">
                  <thead>
                    <tr class="Weather">
                      <th colspan="2">날씨 확인하기</th>
                    </tr>
                  </thead>
                      <tbody>
                        <tr>
                          <td><i class="fa fa-thermometer-quarter">&nbsp; 기온</i></td>
                          <td>{{ weather.tmp }}</td>
                        </tr>
                        <tr>
                          <td><i class="fa fa-sun-o"></i>&nbsp; 하늘상태</td>
                          {% if weather.sky == 1 %}
                            <td>맑음</td>
                          {% elif weather.sky == 3 %}
                            <td>구름많음</td>
                          {% else %}
                            <td>흐림</td>
                          {% endif %}
                        </tr>
                        <tr>
                          <td><i class="fa fa-tint"></i>&nbsp; 습도</td>
                          <td>{{ weather.humn }}</td>
                        </tr>
                        <tr>
                          <td><i class="fa fa-fa fa-paper-plane "></i>&nbsp; 풍향</td>
                          <td>{{ weather.windd }}</td>
                        </tr>
                        <tr>
                          <td><i class="fa fa-life-ring"></i>&nbsp; 풍속</td>
                          <td>{{ weather.winds }}</td>
                        <tr>
                          <td><i class="fa fa-umbrella"></i>&nbsp; 강수량 (mm)</td>
                          {% if weather.rain == 0 %}
                            <td>강수없음</td>
                          {% else %}
                            <td>{{ weather.rain }}</td>
                          {% endif %}
                        </tr>
                        <tr>
                          <td><i class="fa fa-snowflake-o">&nbsp; 적설량 (mm)</i></td>
                          {% if weather.snow == 0 %}
                            <td>적설없음</td>
                          {% else %}
                            <td>{{ weather.snow }}</td>
                          {% endif %}
                        </tr>
                      </tbody>
                </table>

          </div>
        </div>
        <div class="col-md-6">
          <div class="row">
            <div class="col-md-5" style="margin-top:50px;">
                <img class="img-fluid d-block" src={{ weather.pm10 }}>
              <div class="row">
                <div class="col-md-12" style="margin-top:10px; text-align:center;">
                  <h5 contenteditable="true"><b style="font-weight: bold;">미세먼지</b></h5>
                </div>
              </div>
            </div>
            <div class="col-md-5" style="margin-top:50px;">
              <div class="row">
                <div class="col-md-12">
                    <img class="img-fluid d-block" src={{ weather.pm25 }}>
                  <div class="row">
                    <div class="col-md-12" style="margin-top:10px; text-align:center;">
                      <h5 contenteditable="true"><b style="font-weight: bold;">초미세먼지</b></h5>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <hr role="tournament2">
      </div>
    </div>
  </div>
{% endblock %}